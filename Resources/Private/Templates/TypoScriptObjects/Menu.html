{namespace neos=TYPO3\Neos\ViewHelpers}
{namespace ts=TYPO3\TypoScript\ViewHelpers}

<f:render section="itemsList" arguments="{items: items}" />


<f:section name="itemsList">
  <f:for each="{items}" as="item">
    <f:if condition="{item.state} != 'normal'">
		<f:then>
        	<neos:link.node node="{item.node}" class="item active {item.state} {f:if(condition:'{item.subItems}',then:'hasSub',else:' ')}">
        		<i class="icon {item.node.properties.iconsFoundation}"></i>
        		<label class="ellipsis">{item.label}</label>
        	</neos:link.node>
            <f:if condition="{item.subItems}">
                <div class="submenu"><f:render section="itemsList" arguments="{items: item.subItems}" /></div>
            </f:if>
		</f:then>
		<f:else>
        	<neos:link.node node="{item.node}" class="item normal {item.state} {f:if(condition:'{item.subItems}',then:'hasSub',else:' ')}">
        		<i class="icon {item.node.properties.iconsFoundation}"></i>
        		<label class="ellipsis">{item.label}</label>
        		
        	</neos:link.node>
            <f:if condition="{item.subItems}">
                <div class="submenu"><f:render section="itemsList" arguments="{items: item.subItems}" /></div>
            </f:if>
		</f:else>
	</f:if>
  </f:for>
</f:section>